
### Koncepce VLAN

- logické rozdělení sítě na části, bez změny fyzické struktury
- obvykle napojena na switch
	- rozdělení portů switche na několik částí
- mezi VLAN sítěmi lze routovat jako s ostatními sítěmi
- díky VLAN se snižuje počet broadcastů v síti
- díky VLAN se seskupují uživatelé dle skupin / služeb, které jim přísluší
	- dokáže izolovat účastníky sítě nezávisle na ostatních prvcích sítě

### Výhody nasazení

- menší dosah broadcastu
- jednodušší správa sítě
- lepší zabezpečení
- menší počet HW zařízení (síťových prvků)

### Komunikace v rámci VLAN

- při komunikaci v rámci jednoho switche / při komunikaci mezi několika switchy

#### access VLAN

- defaultní mód portu switche
- příjimá pouze packety bez tagovaného rámce (tagované zahazuje)
- může být členem pouze jedné VLAN
- netagované porty a netagovaná data (rámce)
```Cisco
SWITCH(config-if)# switchport access vlan 100
```

#### trunk VLAn

- umožňuje skrz něj propojit jiný switch se zachováním VLAN skupin
- další využití - propojení serverů, které potřebují komunikovat s více VLAN
- použitím **access portu** by si packet nezachoval VLAN a cestoval by po VLAN z cílového switche
- tagované porty a tagovaná | netagovaná data
```Cisco
SWITCH(config-if)# switchport trunk allowed vlan 100, 200
```

### IEEE802.1Q - dot1Q

- uchovává informace o VLAN při cestování packetu celou sítí
- pokud je aktivní encapsulace dot1q, rámec je rozšířen o 4 bity informací
	- značka protokolu 802.1Q
	- priorita
	- příznak, zda je MAC adresa kanonická
	- číslo VLAN
```Cisco
SWITCH(config-if)# switchport trunk encapsulation dot1q
```

### Native VLAN

- "záložní nastavení"
- používá se v případě, že stanice nepodporuje trunk, ovšem switch má trunk nastaven
- musí být nastavena shodně na obou stranách komunikace
- packety bez tagu, které přijdou trunk portem jsou přesměrovány na native VLAN
```Cisco
SWITCH(config-if)# switchport trunk native vlan 1
```

### Management VLAN

- defaultně je nastavena na VLAN 1 (doporučeno změnit)
- používá se pro správu switche
- komunikace přes Telnet, SSH, HTTP...
- nutné je nastavit IP adresu a defaultní bránu

### Voice VLAN

- IP hlalsový provoz z IP telefonu - na access pointu
- telefon obsahuje malý switch (do nej je připojen PC)

### VTP

- VLAN Trunking Protocol 
- protokol, který přenáší informace o VLAN mezi switchi
- spravuje přidávání, mazání a přejmenování VLAN
- každý switch má nastaven jeden z následujících módů:
	- **server** - spravuje seznam VLAN, může je mazat a vytvářet
	- **klient** - příjimá konfiguraci ze serveru, udržuje lokální kopii seznamu
	- **transparentní** - neúčastní se VTP a pracuje samostatně

### DTP

- Dynamic Trunk Protocol
- protokol, který automaticky zjistí, zda je daný port trunk
	- poté vyjedná přepnutí druhé strany také do trunk režimu
- doporučeno nepoužívat kvůli bezpečnosti

### Port security

- zabezpečuje přístup do sítě (jednoduché na konfiguraci)
- kontroluje, zda packety přichází z povolené MAC adresy
- port musí být access/trunk (statický mód)

### Protected port

- na tento port se nezasílá broadcast/multicast/unicast
- zasílá se pouze komunikace na L3 vrstvě = **routování**

### STP

- Spanning Tree Protocol
- zabraňuje vzniku smyček v síti
- smyčka = broadcast packet dorazí do zařízení, které znovu vyše broadcast
- při potencionálním vzniku smyčky => STP zablokuje port v duplicitní cestě
- hledá nejkratší cestu pro packet
- po připojení nového kabelu => indikace oranžovou barvou, než se objeví zelená => port je průchozí

### EtherChannel

- propojení síťových zařízení více rozhraními
- skupina portu = více kabelů => do více portů (tváří se však jako jeden kabel)
- zvyšuje propustnost
- nabízí alternativní trasu v případě výpadku jedné z linek
- STP neblokuje ostatní cesty, protože svazek EtherChannel je jeden virtuální port
- 

# Výhody nasazení
# Acces, Trunk
# IEEE802.1Q
# Native VLAN
# Management VLAN
# Voice VLAN
# Tři způsoby propojení
## Legacy
## Router on a Stick
# Nastavení přepínače L3 pro Inter-VLAN
# Možnost směrování přepínače L3
# Návrh podnikové sítě (npř. se 6 sekcemi)
## VLAN, podsíťování, propojování VLAN
