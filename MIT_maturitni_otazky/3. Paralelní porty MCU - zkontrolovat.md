### Popis portů ATmega64

- (v dokumentaci je to první stránka - I/O and Packages)
- **ATmega64 má 53 programovatelných vstupů/výstupů**
- porty od A do G
	- A - F jsou 8bit
	- G jsou 5bit
- **všechny porty jsou obousměrné (nikoliv současně) a digitální** 
	- digitální = lze zapisovat a číst 0 nebo 1
	- obousměrné = lze používat buď ve vstupním, nebo výstupním režimu  (režim se nastavuje)
- porty jsou po resetu vždy ve vstupním režimu (je na nich 0)
	- **velký vstupní odpor - působí proti nežádoucím jevům**
- některé porty lze přenout do analogového režimu
	- poté slouží jako vstup pro AD převodník
- některé porty mají alternativní funkce pro připojení integrovaných periferií
	- externí paměťové sběrnice, alternativní vstup pro AD převodník

### Elektrické vlastnosti

- krátkodobá výdrž - 40mA
- dlouhodobá výdrž
	- při napětí 3V - 1mA
	- při napětí 5V - 20mA
- piny nesmí naráz procházet více než 400mA
- pro některé piny je difinován součtový limit
- l**ogická 0** = od 0V do 0.2V
- **zakázané písmo** = 0.2V do 0.6V
- **logická 1** = 0.6V a výše
- každé zatížení má definováno maximální výstupní napětí 

### Příklady instrukcí pro práci s porty

- ATmega64 je load-store architektura
	- většina instrukcí může pracovat pouze s registry (jsou i vyjímky)
- v názvu instrukce je **port** nebo **I/O registr**
- `IN`, `OUT`
- `SBI`, `CBI`
- `SBIC`, `SBIS`
- lze hodnotu na bity zapsat / přečíst
- lze nastavit bit / vynulovat / otestovat jeho logickou úroveň

### Praktická část = obvodový popis portu
- **dokumentace strana 67**
![[Pasted image 20230214082701.png]]
- šipky, které vedou **z datové sběrnice** reprezentují výstupní větev
- šipky, které vedou **do datové sběrnice** reprezentují vstupní větev

#### Výstupní větev

- klopný obvod typu D - **PORT**
	- zapisuje data na výstup
- klopný obvod typu D - **Data Direction (DD)**
	- ovládá oddělovač pod ní,
- **proudový budič + oddělovač** uprostřed
	- lze ho zavřít přivedením nuly z vrchu
	- po resetu je ve vstupním režimu (zavřený)

#### Vstupní větev

- vlevo nahoře - **softwarový pull-up odpor**
	- definuje logickou úroveň
	- pokud není tlačítku stisknuto => logická 1
- vlevo dole - **analogový oddělovač**
	- funguje stejně jako oddělovač ve výstupní větvi, ale i pro analogové hodnoty
- za ním - **schmittův klopný obvod**
	- regeneruje náběžnou a sestupnou hranu => rekonstrukce zdeformovaného signálu
	- v kombinaci s externím kondenzátorem fugnuje jako filtrace zákmitů (šumu)
- synchronizer - **zablokuje změnu vstupního signálu než se zapíše**
	- sledovač a hranový klopný obvod
